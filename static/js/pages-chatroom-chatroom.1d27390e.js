(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chatroom-chatroom"],{"0600":function(e,t,a){var i=a("5013");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("4f06").default;s("171ae884",i,!0,{sourceMap:!1,shadowMode:!1})},"0f68":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"status-bar"},[i("v-uni-navigator",{staticClass:"login-c",attrs:{"open-type":"navigateBack","hover-class":"none"}},[i("v-uni-image",{staticClass:"login-back",attrs:{src:a("b952")}})],1),i("v-uni-scroll-view",{staticClass:"scrollv",attrs:{"scroll-x":"true"}},[i("v-uni-view",{staticClass:"users"},e._l(e.users,(function(t,a){return i("v-uni-view",{staticClass:"user-l",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.joinOtoChat(a)}}},[t.tip?i("v-uni-view",{staticClass:"tip"}):e._e(),i("v-uni-image",{attrs:{src:"../../static/images/"+t.userImage+".png"}})],1)})),1)],1)],1),i("v-uni-view",{staticClass:"main"},e._l(e.chatMessageList,(function(t,a){return i("v-uni-view",{key:a},[1==t.id?i("v-uni-view",{staticClass:"left message"},[i("v-uni-image",{attrs:{src:"../../static/images/"+t.userImage+".png"}}),i("v-uni-view",{staticClass:"nr"},[i("v-uni-view",{staticClass:"neir"},[e._v(e._s(t.neir))]),i("v-uni-view",{staticClass:"nt"},[e._v(e._s(t.userName)+" "+e._s(e.timeDetia(t.time)))])],1)],1):e._e(),2==t.id?i("v-uni-view",{staticClass:"right message"},[i("v-uni-image",{attrs:{src:"../../static/images/"+t.userImage+".png"}}),i("v-uni-view",{staticClass:"nr"},[i("v-uni-view",{staticClass:"neir"},[e._v(e._s(t.neir))]),i("v-uni-view",{staticClass:"nt"},[e._v(e._s(e.timeDetia(t.time)))])],1)],1):e._e(),3==t.id?i("v-uni-view",{staticClass:"center"},[i("v-uni-view",{staticClass:"inner"},[e._v(e._s(t.userName))])],1):e._e()],1)})),1),i("v-uni-view",{staticClass:"send"},[i("v-uni-textarea",{staticClass:"chat-send",attrs:{type:"text","confirm-type":"send","auto-height":"true","show-confirm-bar":"false",maxlength:"-1"},model:{value:e.chatMessage,callback:function(t){e.chatMessage=t},expression:"chatMessage"}}),i("v-uni-image",{attrs:{src:a("3e0d"),mode:"aspectFit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"modify",attrs:{animation:e.animationData}},[i("v-uni-view",{staticClass:"oto-user-name"},[e._v(e._s(e.otoUserName))]),i("v-uni-scroll-view",{staticClass:"modfiy-main",attrs:{"scroll-y":"true"}},e._l(e.otoChatMessageList,(function(t,a){return i("v-uni-view",{key:a},[t.fid==e.fid?i("v-uni-view",{staticClass:"left message"},[i("v-uni-image",{attrs:{src:"../../static/images/"+t.userImage+".png"}}),i("v-uni-view",{staticClass:"nr"},[i("v-uni-view",{staticClass:"neir"},[e._v(e._s(t.neir))]),i("v-uni-view",{staticClass:"nt"},[e._v(e._s(e.timeDetia(t.time)))])],1)],1):e._e(),t.fid==e.uid&&t.tid==e.fid?i("v-uni-view",{staticClass:"right message"},[i("v-uni-image",{attrs:{src:"../../static/images/"+t.userImage+".png"}}),i("v-uni-view",{staticClass:"nr"},[i("v-uni-view",{staticClass:"neir"},[e._v(e._s(t.neir))]),i("v-uni-view",{staticClass:"nt"},[e._v(e._s(e.timeDetia(t.time)))])],1)],1):e._e(),3==t.id?i("v-uni-view",{staticClass:"center"},[i("v-uni-view",{staticClass:"inner"},[e._v(e._s(t.userName))])],1):e._e()],1)})),1)],1),i("v-uni-view",{staticClass:"bg",style:{display:e.bg},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.leaveOtoChat.apply(void 0,arguments)}}})],1)},s=[]},2506:function(e,t,a){"use strict";a.r(t);var i=a("41ec"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"3e0d":function(e,t,a){e.exports=a.p+"static/img/send.2dc17438.png"},"41ec":function(e,t,a){"use strict";(function(e){a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14d9"),a("a434");var i={data:function(){return{chatMessage:"",userName:"",otoUserName:"",fid:"",uid:"a",userImage:"",chatMessageList:[],otoChatMessageList:[],member:0,animationData:{},bb:!1,bg:"none",users:""}},onLoad:function(t){this.userName=t.name,this.userImage=t.image,e("log",this.userName,this.userImage," at pages/chatroom/chatroom.vue:117"),this.joinGroup(this.userName,this.userImage),this.welcomeGroup(),this.myself(),this.getGroupMessage(),this.getOtoMessage()},methods:{timeDetia:function(e){var t,a=new Date(e),i=new Date,s=(a.getTime(),a.getHours()),n=a.getMinutes(),r=a.getFullYear(),o=a.getMonth()+1,c=a.getDate(),u=(i.getTime(),i.getHours(),i.getMinutes(),i.getFullYear()),d=i.getMonth()+1,g=i.getDate();return c==g&&o==d&&r==u?(s<10&&(s="0"+s),n<10&&(n="0"+n),t=s+":"+n,t):c+1==g&&o==d&&r==u?(s<10&&(s="0"+s),n<10&&(n="0"+n),t="昨天 "+s+":"+n,t):(o<10&&(o="0"+o),c<10&&(c="0"+c),s<10&&(s="0"+s),n<10&&(n="0"+n),t=r+"年"+o+"月"+c+"日 "+s+":"+n,t)},sendMessage:function(){if(this.chatMessage.length>0&&""==this.fid){var e={neir:this.chatMessage,userImage:this.userImage,time:new Date,id:2},t={neir:this.chatMessage,userImage:this.userImage,userName:this.userName,time:new Date,id:1};this.chatMessageList.push(e),this.chatMessage="",this.socket.emit("appGroupMessage",t)}else if(this.chatMessage.length>0&&""!=this.fid){var a={neir:this.chatMessage,userImage:this.userImage,time:new Date,fid:this.uid,tid:this.fid},i={neir:this.chatMessage,userImage:this.userImage,userName:this.userName,time:new Date,fid:this.uid,tid:this.fid};this.otoChatMessageList.push(a),this.chatMessage="",this.socket.emit("appOtoMessage",i)}},joinGroup:function(t,a){this.socket.emit("appJoinGroup",t,a),e("log",t,a," at pages/chatroom/chatroom.vue:230")},welcomeGroup:function(){var t=this;this.socket.on("serverGroupBroadcastWelcomeMessage",(function(a,i){var s={userName:"欢迎 "+a+" 加入群聊",id:3};t.chatMessageList.push(s);for(var n=0;n<i.length;n++)i[n].id==t.uid&&i.splice(n,1);t.users=i,e("log",t.users," at pages/chatroom/chatroom.vue:254")}))},myself:function(){var t=this;this.socket.on("serverMyself",(function(a,i,s){t.uid=s,e("log",t.uid," at pages/chatroom/chatroom.vue:266");var n={userName:"欢迎 "+a+" 加入群聊",id:3};t.chatMessageList.push(n);for(var r=0;r<i.length;r++)i[r].id==t.uid&&i.splice(r,1);t.users=i,e("log",t.users," at pages/chatroom/chatroom.vue:280")}))},getGroupMessage:function(){var e=this;this.socket.on("serverGroupBroadcastMessage",(function(t){e.chatMessageList.push(t)})),this.socket.on("serverGroupBroadcastLeaveMessage",(function(t,a){var i={userName:t+" 退出群聊",id:3};e.chatMessageList.push(i),e.users=a}))},getOtoMessage:function(){var e=this;this.socket.on("serverOtoMessage",(function(t){var a=t.fid;if(e.fid!=a)for(var i=0;i<e.users.length;i++)e.users[i].id==a&&(e.users[i].tip=!0);e.otoChatMessageList.push(t)}))},joinOtoChat:function(e){this.otoUserName=this.users[e].userName,this.fid=this.users[e].id,this.users[e].tip=!1,this.modify()},leaveOtoChat:function(){this.otoUserName="",this.fid="",this.modify()},modify:function(){this.bb=!this.bb,this.bb?this.bg="block":this.bg="none";var e=uni.createAnimation({duration:400,timingFunction:"ease"});this.animation=e,this.bb?e.bottom(0).step():e.bottom().step(),this.animationData=e.export()}}};t.default=i}).call(this,a("0de9")["log"])},5013:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.status-bar[data-v-acbeeeca]{position:fixed;left:0;width:100%;height:%?88?%;padding-top:0;display:-webkit-box;display:-webkit-flex;display:flex;overflow:hidden;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;z-index:100;color:#272832;-webkit-transition-property:all;transition-property:all;background:hsla(0,0%,100%,.96)}.status-bar .login-c[data-v-acbeeeca]{width:%?60?%;height:%?60?%;padding-top:%?22?%;padding-left:%?32?%}.status-bar .login-back[data-v-acbeeeca]{width:%?20?%;height:%?34?%}.status-bar .scrollv[data-v-acbeeeca]{width:84%}.status-bar .scrollv .users[data-v-acbeeeca]{display:flex}.status-bar .scrollv .users .user-l[data-v-acbeeeca]{padding:%?12?% %?8?%;position:relative}.status-bar .scrollv .users .user-l uni-image[data-v-acbeeeca]{width:%?64?%;height:%?64?%;border-radius:50%}.status-bar .scrollv .users .user-l .tip[data-v-acbeeeca]{width:%?14?%;height:%?14?%;background:#ff4d3c;position:absolute;top:%?12?%;right:%?10?%;border-radius:50%;z-index:10}.main[data-v-acbeeeca]{padding:%?160?% %?28?% %?160?%}.main .message[data-v-acbeeeca],\r\n.modfiy-main .message[data-v-acbeeeca]{display:flex;align-items:flex-end;padding:%?40?% 0}.main .message uni-image[data-v-acbeeeca],\r\n.modfiy-main .message uni-image[data-v-acbeeeca]{flex:none;width:%?64?%;height:%?64?%;border-radius:%?18?%;margin:0 %?20?%}.main .message .nr .neir[data-v-acbeeeca],\r\n.modfiy-main .message .nr .neir[data-v-acbeeeca]{max-width:%?380?%;padding:%?26?% %?32?%;min-height:%?48?%;font-size:%?28?%;color:#191d23;line-height:%?40?%}.main .message .nr .nt[data-v-acbeeeca],\r\n.modfiy-main .message .nr .nt[data-v-acbeeeca]{padding-top:%?8?%;position:absolute;font-size:%?24?%;color:rgba(25,29,35,.5);line-height:%?34?%}.main .left[data-v-acbeeeca],\r\n.modfiy-main .left[data-v-acbeeeca]{flex-direction:row}.main .left .neir[data-v-acbeeeca],\r\n.modfiy-main .left .neir[data-v-acbeeeca]{background:#f4f4f4;border-radius:%?24?% %?24?% %?24?% 0}.main .right[data-v-acbeeeca],\r\n.modfiy-main .right[data-v-acbeeeca]{flex-direction:row-reverse}.main .right .neir[data-v-acbeeeca],\r\n.modfiy-main .right .neir[data-v-acbeeeca]{background:#ffeade;border-radius:%?24?% %?24?% 0 %?24?%}.main .right .nt[data-v-acbeeeca],\r\n.modfiy-main .right .nt[data-v-acbeeeca]{right:%?132?%}.main .center[data-v-acbeeeca],\r\n.modfiy-main .center[data-v-acbeeeca]{text-align:center;padding:%?32?% 0 %?20?%}.main .center .inner[data-v-acbeeeca],\r\n.modfiy-main .center .inner[data-v-acbeeeca]{font-size:%?24?%;display:inline-block;color:rgba(25,29,35,.5);line-height:%?34?%}.send[data-v-acbeeeca]{position:fixed;z-index:103;bottom:0;width:100%;padding-bottom:0;min-height:%?100?%;background:hsla(0,0%,100%,.96);display:flex}.send .chat-send[data-v-acbeeeca]{margin:%?12?% %?48?%;flex:1;width:100%;min-height:%?40?%;background:#f2f2f2;border-radius:%?24?%;font-size:%?28?%;color:#191d23;line-height:%?40?%;padding:%?24?% %?80?% %?24?% %?24?%}.send uni-image[data-v-acbeeeca]{width:%?48?%;height:%?48?%;position:absolute;right:%?68?%;top:%?32?%}.modify[data-v-acbeeeca]{position:fixed;overflow:hidden;left:0;bottom:-90%;width:100%;height:90%;z-index:102;background:#fff;border-radius:%?48?% %?48?% 0 0}.oto-user-name[data-v-acbeeeca]{position:absolute;top:0;background-color:#fff;height:%?80?%;text-align:center;width:100%;line-height:%?80?%}.modfiy-main[data-v-acbeeeca]{padding:%?88?% %?28?% %?120?%;box-sizing:border-box;height:100%}.bg[data-v-acbeeeca]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:101;background-color:rgba(0,0,0,.4)}',""]),e.exports=t},b952:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAuCAYAAAA2oQl1AAABm0lEQVRYR7XWO0oDQRjA8e+TRImF4AFMp2FdApqI2CgIWggeQc9gIdp5A7HxCmKt1kKwtNh0CxNYCxFCRLDYgBizuyOr7JLHvmbmmznA/JgX80fQM9A0m0sA3z3btn9CAqmdar2+OD8s33GAHc7hLfBx13GsF1IoRCrD8iMANKIFIOAVY9YpGZSE/G8ZnjFmXZJAaQgAtHzPPXAcZ6AMZSF9Fw+7XetL+TIURZQgEUQaEkWkIBlEGJJFhCAVpDCkihSCKJBciArJhCiRVIgaSYR0IFOQLmQM0onEkG4kgrBWazwBwvZEP7RG/xPVtghrper5/HViItZ3sRl9WqrI34pM05z1/LkPAFgYmZAj4Alj1jUFEp/RsrG2j8HMPSJUdGFxMxjG+p4f4IMubCxOdGJTFaQLS8wtHVhq11FjmQFJieWWKhWWC4XvigIrBFFghSFVTAhSwYQhWUwKksGkIVFMCRLBlKGiGAmUgx0xZt2SQWkYAjwz1t4ihRIxDjedTvuYHAqxldWNTQyCc+DwXioNLmzb/tQCJZXTL8IJez4aufulAAAAAElFTkSuQmCC"},d169:function(e,t,a){"use strict";a.r(t);var i=a("0f68"),s=a("2506");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("d71a");var r=a("f0c5"),o=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,"acbeeeca",null,!1,i["a"],void 0);t["default"]=o.exports},d71a:function(e,t,a){"use strict";var i=a("0600"),s=a.n(i);s.a}}]);